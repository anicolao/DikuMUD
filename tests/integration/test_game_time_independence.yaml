name: Test Game Time Independence
description: |
  Verify that game time (tick timing) is independent of main loop speed.
  Tests that a game hour takes 75 seconds regardless of whether the server
  is running in normal mode or spin mode.

setup:
  - type: run_command
    command: say Testing game time independence

# Test normal mode tick timing
test_normal_mode:
  - type: run_command
    command: time
    expect: "It is"
    description: "Check initial game time"
  
  - type: wait
    duration: 5
    description: "Wait 5 seconds"
  
  # The prompt should show approximately 70 seconds to next tick (75 - 5)
  # We're not testing the exact value because of timing variations,
  # but we verify the tick timer exists and decreases over time

# Test that ticks happen based on real time
test_tick_timing:
  - type: run_command
    command: look
    description: "Trigger prompt to see tick timer"
  
  - type: wait
    duration: 3
    description: "Wait 3 seconds"
  
  - type: run_command
    command: look
    description: "Verify tick timer decreased by approximately 3 seconds"

cleanup:
  - type: run_command
    command: quit
    expect: "Goodbye"
